<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>注册 - Shopee Clone</title>
<style>
body { font-family: Arial; background: #f7f7f7; display:flex; justify-content:center; align-items:center; height:100vh; }
form { background:white; padding:30px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
input, select { display:block; width:250px; margin:10px 0; padding:8px; }
button { background:#f53d2d; color:white; border:none; padding:10px; width:100%; cursor:pointer; }
a { display:block; margin-top:10px; text-align:center; }
</style>
</head>
<body>

<form id="registerForm">
  <h2>注册账号</h2>
  <input type="text" id="username" placeholder="用户名" required>
  <input type="password" id="password" placeholder="密码" required>
  <select id="role">
    <option value="buyer">买家</option>
    <option value="seller">卖家</option>
  </select>
  <button type="submit">注册</button>
  <a href="login.html">已有账号？去登录</a>
</form>

<script>
document.getElementById("registerForm").onsubmit = async function(e){
  e.preventDefault();
  const data = {
    action: "register",
    username: username.value,
    password: password.value,
    role: role.value
  };
  try {
    const res = await fetch("auth.php", {
      method: "POST",
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(data)
    });
    const msg = await res.json();
    if(msg.status === "ok"){
      alert("注册成功，请登录！");
      window.location.href = "login.html";
    } else {
      alert("注册失败：" + msg.message);
    }
  } catch(err){
    alert("网络错误：" + err.message);
  }
};
</script>

</body>
</html>
